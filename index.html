<!DOCTYPE html>
<html lang="zh">

<head>
  <title>MC @ UESTClug</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />
  <noscript>
    <link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
</head>

<body class="is-preload">
  <!-- Wrapper -->
  <div id="wrapper">
    <!-- Header -->
    <header id="header">
      <div class="logo">
        <span class="icon fa-cube"></span>
      </div>
      <div class="content">
        <div class="inner">
          <h1>MC @ UESTClug</h1>
          <h2>Presented by UESTC LUG</h2>
          <p>
            1.16.4 MOD 生存<br />
            Welcome to UESTC LUG Minecraft Server
          </p>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="#client">下载</a></li>
          <li><a href="#update">更新</a></li>
          <li><a href="#about">关于</a></li>
          <li><a href="#group">群组</a></li>
          <li><a href="#usage">使用</a></li>
        </ul>
      </nav>
    </header>

    <!-- Main -->
    <div id="main">
      <!-- Intro -->
      <article id="client">
        <h2 class="major">下载</h2>
        <!-- <span class="image main"><img src="images/npic01.jpg" alt="" /></span> -->
        <section>
          <h2>6.0.0 Beta 更新日志</h2>
          <h3>更新时间： 2020-12-10</h3>
          <p>
            1.16.4 MOD 服务器，包含以下主要 MOD：
            <ul>
              <li>帕秋莉手册、苹果皮、Carpet、圈地、Trees Do Not Float 等小修改</li>
              <li>工业重生 工业 MOD</li>
              <li>野营物品、Blockus、沉浸传送门 等美化和实用 MOD</li>
            </ul>
            并提供了效果极佳的 3D 渲染网页地图和性能优化插件。
          </p>
        </section>
        <hr />
        <h4>
          (请自行安装 1.16.4 版本的客户端， fabric 和光影材质请自行安装。)
        </h4>
        <p>
          <a href="https://mc-map.uestc.app" class="button icon fa-map">网页地图</a>
          <a href="http://10.20.0.47" class="button icon fa-map">网页地图 (校园网)</a>
          <a href="http://mc-map.nia.dn42" class="button icon fa-map">网页地图 (DN42)</a>
          <a href="https://drive.google.com/file/d/1Wy1C3afoO5x94xfT-l5XZTRMaURwi-Wf/view?usp=sharing" class="button icon fa-download">MOD 打包</a>
	  <a href="https://wws.lanzous.com/i3uogj7yctg" class="button icon fa-download">MOD 打包 (国内)</a>
        </p>
      </article>

      <!-- Work -->
      <article id="update">
        <h2 class="major">更新内容</h2>
        <h3>6.0.0 Beta | 20-12-10</h3>
        <ul>
          <li>合并重置 Stable & Beta，节省资源。</li>
          <li>改为更加先进的 fabric 架构，提高性能并增加若干 MOD。</li>
          <li>升级 1.16.4。</li>
        </ul>
        <h3>5.0.0 Stable & Beta | 20-07-05</h3>
        <ul>
          <li>服务器分叉，分别设立 Stable 和 Beta。</li>
          <li>全线升级 1.16.1。</li>
        </ul>
        <h3>4.0.0 Beta | 20-03-21</h3>
        <ul>
          <li>删库恢复。</li>
        </ul>
        <h3>3.0.0 Beta | 20-02-02</h3>
        <ul>
          <li>2020春季纯净版。</li>
          <li>服务端考虑加入经济系统和其他辅助插件，目前暂不可用。</li>
        </ul>
        <h3>2.0.0 Beta | 19-12-26</h3>
        <ul>
          <li>正式发布2020版本。</li>
        </ul>
        <h3>0.2.0 Beta | 19-12-26</h3>
        <ul>
          <li>全新的Beta测试。</li>
          <li>
            完整更新列表参考<a href="https://md.uestclug.org/i3R-4bkVTX2gserCL-n3OA">这里</a>。
          </li>
        </ul>
        <h3>1.1.0 | 19-12-03</h3>
        <ul>
          <li>更新了插件。</li>
          <li>跟随更新了 mod，并增加了墓碑 mod。</li>
          <li>
            由于服务器性能很好，移除了不兼容的卡顿查询插件，并且不寻找替代。
          </li>
        </ul>
        <h3>0.0.1 | 19-11-04</h3>
        <ul>
          <li>建立服务器。</li>
        </ul>
      </article>

      <!-- About -->
      <article id="about">
        <h2 class="major">关于</h2>
        <span class="image main"><img src="images/pic03.jpg" alt="" /></span>
        <p>这是一个版本为 1.16.4 的 MOD 生存服务器，包含以下 MOD：</p>
        <ul>
          <li>帕秋莉手册(Patchouli)</li>
          <li>工业重生(TechReborn)</li>
          <li>苹果皮(AppleSkin)</li>
          <li>圈地(FLAN)</li>
          <li>Carpet</li>
          <li>野营物品(Campanion)</li>
          <li>Blockus</li>
          <li>Trees Do Not Float</li>
          <li>沉浸传送门</li>
        </ul>
        <hr />
        <h3>连接地址</h3>
        <p>A/CNAME 记录：</p>
        <ul>
          <li><code>mc.uestclug.org</code></li>
          <li><code>mc.uestc.dev</code></li>
          <li><code>mc.uestc.app</code></li>
          <li><code>mc.nia.dn42 (DN42)</code></li>
        </ul>
        <p>SRV 记录：</p>
        <ul>
          <li><code>uestclug.org</code></li>
          <li><code>uestc.dev</code></li>
          <li><code>uestc.app</code></li>
          <li><code>nia.dn42 (DN42)</code></li>
        </ul>
        <p>本服务器由 UESTC LUG 建立并维护，更多需求请联系相关管理。</p>
      </article>

      <!-- Contact -->
      <article id="group">
        <h2 class="major">交流</h2>
        <p>
          <del>请使用以下按钮加入我们的 Telegram 群组</del><br />暂时还没有，请使用 LUG 水群。
        </p>
        <ul class="icons">
          <li><a href="#" class="fab fa-telegram-plane"></a></li>
        </ul>
      </article>

      <!-- Elements -->
      <article id="usage">
        <h2 class="major">使用说明</h2>
        <section>
          <h3 class="major">启动器</h3>
          <h4>可选的部分启动器列表</h4>
          <ul>
            <li>官方启动器</li>
            <li>
              <a href="https://hmcl.huangyuhui.net/download">HMCL (GPLv3) </a>
            </li>
            <li><a href="https://github.com/bangbang93/BMCL">BMCL</a></li>
            以下是 尚未确定/闭源 的启动器：
            <li><a href="https://tlauncher.org/en/">TLauncher</a></li>
            <li><a href="https://www.bakaxl.com">BakaXL</a></li>
            <li>...</li>
          </ul>
          <h4>或者本校提供的 HMCL flatpak 镜像</h4>
          <ul>
            <li>
              <a href="http://mirrors.uestc.cn/uestclug/flatpakrepo/">UESTC Mirrors</a>
            </li>
          </ul>
        </section>
        <hr />
        <section>
          <h3 class="major">部分问题</h3>
          <ul>
            <li>
              <h4>暂无，等您来提</h4>
            </li>
          </ul>
        </section>
        <hr />
        <section>
          <h3 class="major">游戏体验</h3>
          <p>
            相关插件的使用方法，将会在进入游戏时发放的手册中做出说明（WIP）。同时也提供一个入门手册（WIP）。
          </p>
          <a href="https://md.uestclug.org/s/gaclheVD7" class="button icon fa-download">入门手册</a>
        </section>
      </article>
    </div>

    <!-- Footer -->
    <footer id="footer">
      <p class="copyright">&copy; MC @ UESTCLUG.</p>
    </footer>
  </div>

  <!-- BG -->
  <div id="bg">
    <canvas id="sakura"></canvas>
  </div>

  <!-- Scripts -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/browser.min.js"></script>
  <script src="assets/js/breakpoints.min.js"></script>
  <script src="assets/js/util.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/js/sakura.js"></script>
</body>

</html>

<!-- sakura shader -->
<script id="sakura_point_vsh" type="x-shader/x_vertex" src="shaders/sakura.shader">
  uniform mat4 uProjection;
  uniform mat4 uModelview;
  uniform vec3 uResolution;
  uniform vec3 uOffset;
  uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
  uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

  attribute vec3 aPosition;
  attribute vec3 aEuler;
  attribute vec2 aMisc; //x:size, y:fade

  varying vec3 pposition;
  varying float psize;
  varying float palpha;
  varying float pdist;

  //varying mat3 rotMat;
  varying vec3 normX;
  varying vec3 normY;
  varying vec3 normZ;
  varying vec3 normal;

  varying float diffuse;
  varying float specular;
  varying float rstop;
  varying float distancefade;

  void main(void) {
  	// Projection is based on vertical angle
  	vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);
  	gl_Position = uProjection * pos;
  	gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;

  	pposition = pos.xyz;
  	psize = aMisc.x;
  	pdist = length(pos.xyz);
  	palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);

  	vec3 elrsn = sin(aEuler);
  	vec3 elrcs = cos(aEuler);
  	mat3 rotx = mat3(
  		1.0, 0.0, 0.0,
  		0.0, elrcs.x, elrsn.x,
  		0.0, -elrsn.x, elrcs.x
  	);
  	mat3 roty = mat3(
  		elrcs.y, 0.0, -elrsn.y,
  		0.0, 1.0, 0.0,
  		elrsn.y, 0.0, elrcs.y
  	);
  	mat3 rotz = mat3(
  		elrcs.z, elrsn.z, 0.0,
  		-elrsn.z, elrcs.z, 0.0,
  		0.0, 0.0, 1.0
  	);
  	mat3 rotmat = rotx * roty * rotz;
  	normal = rotmat[2];

  	mat3 trrotm = mat3(
  		rotmat[0][0], rotmat[1][0], rotmat[2][0],
  		rotmat[0][1], rotmat[1][1], rotmat[2][1],
  		rotmat[0][2], rotmat[1][2], rotmat[2][2]
  	);
  	normX = trrotm[0];
  	normY = trrotm[1];
  	normZ = trrotm[2];

  	const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);

  	float tmpdfs = dot(lit, normal);
  	if(tmpdfs < 0.0) {
  		normal = -normal;
  		tmpdfs = dot(lit, normal);
  	}
  	diffuse = 0.4 + tmpdfs;

  	vec3 eyev = normalize(-pos.xyz);
  	if(dot(eyev, normal) > 0.0) {
  		vec3 hv = normalize(eyev + lit);
  		specular = pow(max(dot(hv, normal), 0.0), 20.0);
  	}
  	else {
  		specular = 0.0;
  	}

  	rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);
  	rstop = pow(rstop, 0.5);
  	//-0.69315 = ln(0.5)
  	distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));
  }
</script>
<script id="sakura_point_fsh" type="x-shader/x_fragment">
  #ifdef GL_ES
  //precision mediump float;
  precision highp float;
  #endif

  uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
  uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

  const vec3 fadeCol = vec3(0.08, 0.03, 0.06);

  varying vec3 pposition;
  varying float psize;
  varying float palpha;
  varying float pdist;

  //varying mat3 rotMat;
  varying vec3 normX;
  varying vec3 normY;
  varying vec3 normZ;
  varying vec3 normal;

  varying float diffuse;
  varying float specular;
  varying float rstop;
  varying float distancefade;

  float ellipse(vec2 p, vec2 o, vec2 r) {
  	vec2 lp = (p - o) / r;
  	return length(lp) - 1.0;
  }

  void main(void) {
  	vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;
  	vec3 d = vec3(0.0, 0.0, -1.0);
  	float nd = normZ.z; //dot(-normZ, d);
  	if(abs(nd) < 0.0001) discard;

  	float np = dot(normZ, p);
  	vec3 tp = p + d * np / nd;
  	vec2 coord = vec2(dot(normX, tp), dot(normY, tp));

  	//angle = 15 degree
  	const float flwrsn = 0.258819045102521;
  	const float flwrcs = 0.965925826289068;
  	mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);
  	vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;

  	float r;
  	if(flwrp.x < 0.0) {
  		r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);
  	}
  	else {
  		r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);
  	}

  	if(r > rstop) discard;

  	vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);
  	float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));
  	col *= vec3(1.0, grady, grady);
  	col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));
  	col = col * diffuse + specular;

  	col = mix(fadeCol, col, distancefade);

  	float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;
  	alpha = smoothstep(0.0, 1.0, alpha) * palpha;

  	gl_FragColor = vec4(col * 0.5, alpha);
  }
</script>
<!-- effects -->
<script id="fx_common_vsh" type="x-shader/x_vertex">
  uniform vec3 uResolution;
  attribute vec2 aPosition;

  varying vec2 texCoord;
  varying vec2 screenCoord;

  void main(void) {
  	gl_Position = vec4(aPosition, 0.0, 1.0);
  	texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
  	screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
  }
</script>
<script id="bg_fsh" type="x-shader/x_fragment">
  #ifdef GL_ES
  //precision mediump float;
  precision highp float;
  #endif

  uniform vec2 uTimes;

  varying vec2 texCoord;
  varying vec2 screenCoord;

  void main(void) {
  	vec3 col;
  	float c;
  	vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);
  	c = exp(-pow(length(tmpv) * 1.8, 2.0));
  	col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);
  	gl_FragColor = vec4(col * 0.5, 1.0);
  }
</script>
<script id="fx_brightbuf_fsh" type="x-shader/x_fragment">
  #ifdef GL_ES
  //precision mediump float;
  precision highp float;
  #endif
  uniform sampler2D uSrc;
  uniform vec2 uDelta;

  varying vec2 texCoord;
  varying vec2 screenCoord;

  void main(void) {
  	vec4 col = texture2D(uSrc, texCoord);
  	gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);
  }
</script>
<script id="fx_dirblur_r4_fsh" type="x-shader/x_fragment">
  #ifdef GL_ES
  //precision mediump float;
  precision highp float;
  #endif
  uniform sampler2D uSrc;
  uniform vec2 uDelta;
  uniform vec4 uBlurDir; //dir(x, y), stride(z, w)

  varying vec2 texCoord;
  varying vec2 screenCoord;

  void main(void) {
  	vec4 col = texture2D(uSrc, texCoord);
  	col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);
  	col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);
  	col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);
  	col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);
  	gl_FragColor = col / 5.0;
  }
</script>
<!-- effect fragment shader template -->
<script id="fx_common_fsh" type="x-shader/x_fragment">
  #ifdef GL_ES
  //precision mediump float;
  precision highp float;
  #endif
  uniform sampler2D uSrc;
  uniform vec2 uDelta;

  varying vec2 texCoord;
  varying vec2 screenCoord;

  void main(void) {
  	gl_FragColor = texture2D(uSrc, texCoord);
  }
</script>
<!-- post processing -->
<script id="pp_final_vsh" type="x-shader/x_vertex">
  uniform vec3 uResolution;
  attribute vec2 aPosition;
  varying vec2 texCoord;
  varying vec2 screenCoord;
  void main(void) {
  	gl_Position = vec4(aPosition, 0.0, 1.0);
  	texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
  	screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
  }
</script>
<script id="pp_final_fsh" type="x-shader/x_fragment">
  #ifdef GL_ES
  //precision mediump float;
  precision highp float;
  #endif
  uniform sampler2D uSrc;
  uniform sampler2D uBloom;
  uniform vec2 uDelta;
  varying vec2 texCoord;
  varying vec2 screenCoord;
  void main(void) {
  	vec4 srccol = texture2D(uSrc, texCoord) * 2.0;
  	vec4 bloomcol = texture2D(uBloom, texCoord);
  	vec4 col;
  	col = srccol + bloomcol * (vec4(1.0) + srccol);
  	col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);
  	col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)

  	gl_FragColor = vec4(col.rgb, 1.0);
  	gl_FragColor.a = 1.0;
  }
</script>
